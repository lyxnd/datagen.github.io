import{_ as L,l as O,r as g,m as q,a as u,o as r,b as f,e as t,d as o,w as _,t as M,u as R,n as Q,F as C,f as S,p as P,k as Y,i as U,q as X,g as Z}from"./index-3946nwtf.js";import{F as E}from"./FileSaver.min-Fq9_HsNI.js";const p=v=>(P("data-v-6aa072b1"),v=v(),Y(),v),D={class:"pool",style:{"border-left":"2px dashed black"}},ee={class:"pool",style:{"align-items":"center",display:"flex"}},te=p(()=>t("span",{style:{"padding-right":"10px"}},"Item :",-1)),le={style:{"align-items":"center",height:"100%","padding-left":"20px","font-weight":"bold","font-size":"30px"}},ne={class:"pool"},oe=p(()=>t("span",{style:{"padding-right":"10px"}},"function: ",-1)),se={key:0,class:"pool"},ae=p(()=>t("h5",{style:{"padding-right":"10px","font-weight":"bold","font-size":"larger"}},"levels :",-1)),ie=p(()=>t("span",{style:{"padding-right":"10px"}},"Min :",-1)),de=p(()=>t("span",{style:{padding:"0 10px"}},"Max :",-1)),ue=p(()=>t("span",{style:{"padding-right":"5px"}},"Treasure :",-1)),ce={key:1,class:"pool"},re=p(()=>t("h5",{style:{"font-weight":"bold","font-size":"larger"}},"count :",-1)),pe=p(()=>t("br",null,null,-1)),me={key:0},_e=p(()=>t("span",{style:{"padding-right":"10px"}},"Min :",-1)),fe=p(()=>t("span",{style:{padding:"0 10px"}},"Max :",-1)),he={key:1},ve=p(()=>t("span",{style:{padding:"0 10px"}},"Count :",-1)),ye=p(()=>t("span",{style:{"padding-right":"10px"}},"Add :",-1)),ge={__name:"ItemLootTable",emits:["update-item","remove-item"],setup(v,{emit:V}){const l=O({item:null,type:!0,function:"minecraft:enchant_with_levels",treasure:!1,min:0,max:1,count:1,add:!1}),x=g([]);g("minecraft:uniform");const m=()=>{h("update-item",{...l})},h=V,N=()=>{h("remove-item")};q(l,m,{deep:!0}),(async()=>{try{const s=await(await fetch("/image-paths.json")).json();x.value=s.map(y=>({label:y.split("/").pop().split(".")[0],path:y,value:y}))}catch(w){console.error("Error loading image paths:",w)}})();const T=[{label:"Enchant With Levels",value:"minecraft:enchant_with_levels"},{label:"Set Count",value:"minecraft:set_count"}];return(w,s)=>{const y=u("el-image"),z=u("el-select-v2"),j=u("el-button"),i=u("el-option"),a=u("el-select"),e=u("el-input-number"),c=u("el-switch");return r(),f("div",null,[t("div",D,[t("div",ee,[te,o(z,{modelValue:l.item,"onUpdate:modelValue":s[0]||(s[0]=n=>l.item=n),options:x.value,placeholder:"Select Items",filterable:"",clearable:"","item-height":60,style:{width:"50%","margin-left":"25px"},onChange:m,size:"large",props:{checkStrictly:!0}},{default:_(({item:n})=>[o(y,{src:n.value,style:{width:"50px",height:"50px","margin-right":"10px"}},null,8,["src"]),t("span",le,M(n.label),1)]),_:1},8,["modelValue","options"]),o(y,{src:l.item,style:{width:"40px",height:"40px","margin-left":"10px"}},null,8,["src"]),o(j,{type:"danger",round:"",onClick:N,icon:R(Q),size:"small",style:{"margin-left":"10px"}},null,8,["icon"])]),t("div",ne,[oe,o(a,{style:{width:"60%"},modelValue:l.function,"onUpdate:modelValue":s[1]||(s[1]=n=>l.function=n)},{default:_(()=>[(r(),f(C,null,S(T,n=>o(i,{key:n.value,label:n.label,value:n.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),l.function==="minecraft:enchant_with_levels"?(r(),f("div",se,[ae,ie,o(e,{modelValue:l.min,"onUpdate:modelValue":s[2]||(s[2]=n=>l.min=n),min:0,onChange:m,style:{width:"35%"}},null,8,["modelValue"]),de,o(e,{modelValue:l.max,"onUpdate:modelValue":s[3]||(s[3]=n=>l.max=n),min:0,onChange:m,style:{width:"35%"}},null,8,["modelValue"]),ue,o(c,{modelValue:l.treasure,"onUpdate:modelValue":s[4]||(s[4]=n=>l.treasure=n),class:"ml-2","inline-prompt":"",style:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff4949"},"active-text":"Y","inactive-text":"N"},null,8,["modelValue"])])):(r(),f("div",ce,[re,o(c,{modelValue:l.type,"onUpdate:modelValue":s[5]||(s[5]=n=>l.type=n),class:"mb-2","active-text":"uniform","inactive-text":"aptotic"},null,8,["modelValue"]),pe,l.type?(r(),f("div",me,[_e,o(e,{modelValue:l.min,"onUpdate:modelValue":s[6]||(s[6]=n=>l.min=n),min:1,onChange:m,style:{width:"35%"}},null,8,["modelValue"]),fe,o(e,{modelValue:l.max,"onUpdate:modelValue":s[7]||(s[7]=n=>l.max=n),min:1,onChange:m,style:{width:"35%"}},null,8,["modelValue"])])):(r(),f("div",he,[ve,o(e,{modelValue:l.count,"onUpdate:modelValue":s[8]||(s[8]=n=>l.count=n),min:1,max:10,onChange:m},null,8,["modelValue"])])),ye,o(c,{modelValue:l.add,"onUpdate:modelValue":s[9]||(s[9]=n=>l.add=n),class:"ml-2","inline-prompt":"",style:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff4949"},"active-text":"Y","inactive-text":"N"},null,8,["modelValue"])]))])])}}},xe=L(ge,[["__scopeId","data-v-6aa072b1"]]),b=v=>(P("data-v-00147819"),v=v(),Y(),v),be={style:{height:"100%"}},Ve={style:{display:"flex","flex-direction":"column"}},we={class:"pool"},ke={style:{display:"flex","flex-direction":"row",width:"100%"}},Ie=b(()=>t("span",{style:{"align-items":"center","padding-right":"10px"}},"Type : ",-1)),$e={class:"pool"},Ue=b(()=>t("span",{style:{"align-items":"center","padding-right":"10px"}},"Random Sequence :",-1)),Ce=b(()=>t("span",{style:{"font-weight":"bolder","font-size":"large","padding-right":"10px"}},"Pools :",-1)),Se={class:"pool",style:{"border-left":"1px dashed black"}},Ne={class:"pool"},Te=b(()=>t("span",{style:{"font-weight":"bold","padding-right":"10px"}},"entries :",-1)),ze={class:"pool"},je=b(()=>t("span",{style:{"padding-right":"10px"}},"bonus_rolls :",-1)),Ae={class:"pool"},Be=b(()=>t("span",{style:{"padding-right":"10px"}},"rolls :",-1)),Fe={style:{width:"100%",display:"flex","justify-content":"flex-end"}},Je={__name:"LootTables",setup(v){const V=g(""),l=g(""),x=g(null),m=g(null),h=g([]),N=[{label:"Empty",value:"minecraft:empty"},{label:"Advancement Reward",value:"minecraft:advancement_reward"},{label:"Archaeology",value:"minecraft:archaeology"},{label:"Barter",value:"minecraft:barter"},{label:"Block",value:"minecraft:block"},{label:"Chest",value:"minecraft:chest"},{label:"Entity",value:"minecraft:entity"},{label:"Fishing",value:"minecraft:fishing"},{label:"Gift",value:"minecraft:gift"}],B=(i,a,e)=>{e.item&&(e.item=y(e.item)),(e.function==="minecraft:enchant_with_levels"||e.type)&&(e.type="minecraft:uniform"),h.value[i].value.items[a]=e},T=(i,a)=>{console.log(h),h.value[i].value.items.splice(a,1)},w=()=>{let i=g({items:[],bonus_rolls:0,rolls:0});h.value.push(i)},s=i=>{let a=O({item:null,type:"",function:"minecraft:enchant_with_levels",treasure:!1,min:0,max:1,count:1,add:!1});i.value.items.push(a)},y=(i,a)=>{if(!i)return;let e=i.split("/").pop(),c=e.lastIndexOf(".");return e=e.substring(0,c),"minecraft:"+e};q([x,h],()=>{let i={type:x.value,pools:h.value.map(a=>({bonus_rolls:a.value.bonus_rolls,rolls:a.value.rolls,entries:a.value.items.map(e=>({type:"minecraft:item",name:e.item})),functions:a.value.items.map(e=>{let c={function:e.function};return e.function==="minecraft:enchant_with_levels"?(c.levels={type:e.type,min:e.min,max:e.max},c.treasure=e.treasure):e.function==="minecraft:set_count"&&(c.count=e.type==="minecraft:uniform"?{type:e.type,min:e.min,max:e.max}:e.count,c.add=e.add),c})}))};V.value=JSON.stringify(i,null,2)},{deep:!0});const j=()=>{const i=new Blob([V.value],{type:"application/json"});l.value?E.saveAs(i,l.value+".json"):E.saveAs(i,m.value||"lootTable.json")};return(i,a)=>{const e=u("el-input"),c=u("el-option"),n=u("el-select"),I=u("el-button"),F=u("el-input-number"),G=u("el-aside"),W=u("el-card"),H=u("el-main"),K=u("el-container");return r(),f("div",be,[o(K,{style:{height:"100%"}},{default:_(()=>[o(G,{width:"440px",style:{"box-shadow":"aqua 2px 0"}},{default:_(()=>[t("div",Ve,[t("div",we,[o(e,{modelValue:l.value,"onUpdate:modelValue":a[0]||(a[0]=d=>l.value=d),placeholder:"导出Json命名(选填)",style:{width:"60%"}},null,8,["modelValue"])]),t("div",ke,[Ie,o(n,{modelValue:x.value,"onUpdate:modelValue":a[1]||(a[1]=d=>x.value=d),style:{width:"60%"}},{default:_(()=>[(r(),f(C,null,S(N,d=>o(c,{key:d.value,label:d.label,value:d.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),t("div",$e,[Ue,o(e,{modelValue:m.value,"onUpdate:modelValue":a[2]||(a[2]=d=>m.value=d),placeholder:"命名空间ID(选填) (eg: minecraft:archaeology/desert_pyramid)",style:{width:"50%"}},null,8,["modelValue"])]),t("div",null,[Ce,o(I,{type:"success",round:"",icon:R(X),onClick:w},{default:_(()=>[U("添加新的Pool")]),_:1},8,["icon"]),o(I,{type:"primary",round:"",onClick:i.generateJSON,style:{"margin-left":"120px"},size:"default"},{default:_(()=>[U("生成Json")]),_:1},8,["onClick"])]),(r(!0),f(C,null,S(h.value,(d,$)=>(r(),f("div",{key:$},[t("div",Se,[t("div",Ne,[Te,o(I,{type:"info",round:"",plain:"",onClick:k=>s(d,$),style:{"padding-left":"15px"}},{default:_(()=>[U("添加物品")]),_:2},1032,["onClick"])]),t("div",ze,[je,o(F,{modelValue:d.value.bonus_rolls,"onUpdate:modelValue":k=>d.value.bonus_rolls=k,precision:2,step:.1},null,8,["modelValue","onUpdate:modelValue"])]),t("div",Ae,[Be,o(F,{modelValue:d.value.rolls,"onUpdate:modelValue":k=>d.value.rolls=k,min:1,precision:2,step:.1},null,8,["modelValue","onUpdate:modelValue"])]),(r(!0),f(C,null,S(d.value.items,(k,A)=>(r(),Z(xe,{key:A,onUpdateItem:J=>B($,A,J),onRemoveItem:J=>T($,A)},null,8,["onUpdateItem","onRemoveItem"]))),128))])]))),128))])]),_:1}),o(H,null,{default:_(()=>[o(W,{style:{"background-color":"#282828",color:"white",height:"100vh",overflow:"auto"}},{default:_(()=>[t("div",Fe,[o(I,{type:"success",round:"",onClick:j,style:{"z-index":"1"}},{default:_(()=>[U("导出")]),_:1})]),t("pre",null,M(V.value),1)]),_:1})]),_:1})]),_:1})])}}},Oe=L(Je,[["__scopeId","data-v-00147819"]]);export{Oe as default};
